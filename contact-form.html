<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Vital Works - Kontaktformular">
    <title>Vital Works - Individuelle Anfrage</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.3.2/css/flag-icons.min.css" />
    <style>
        :root {
            --royal-blue: #0635c3;
            --royal-blue-dark: #3457b8;
            --success-green: #32a852;
        }
        .vw-title { color: var(--royal-blue); }
        .form-field {
            display: flex;
            flex-direction: column;
        }
        .form-label {
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
        }
        .phone-input-wrapper {
            display: flex;
            gap: 0.5rem;
        }
        .country-code-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            position: relative;
            flex: 1;
        }
        .country-code-selector:hover {
            border-color: var(--royal-blue);
        }
        .phone-number-input {
            flex: 3;
        }
        .country-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 280px;
            margin-top: 0.25rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
            display: none;
        }
        .country-dropdown.show {
            display: block;
        }
        .country-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
        }
        .country-option .fi {
            font-size: 1.5rem;
            width: 32px;
            height: 24px;
        }
        .country-option:hover {
            background-color: #f3f4f6;
        }
        .input.input-error,
        .select.input-error,
        .textarea.input-error {
            border-color: #ef4444 !important;
            border-width: 2px;
        }
    </style>
</head>

<body class="bg-white">

    <!-- HEADER -->
    <header class="border-b border-base-200 bg-white sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="navbar px-0">
                <div class="navbar-start">
                    <a class="text-lg font-bold vw-title" href="landingpage.html">Vital Works</a>
                </div>
                <div class="navbar-end">
                    <ul class="menu menu-horizontal px-1 text-sm">
                        <li><a href="landingpage.html">Landingpage</a></li>
                        <li><a href="landingpage.html#pakete">Kurs buchen</a></li>
                        <li><a href="plustraining.html">Kursinfo</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="py-12 px-4">
        <div class="max-w-3xl mx-auto">
            <div class="text-center mb-8">
                <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6" 
                     style="background-color: #f0f5ff;">
                    <i data-lucide="mail" style="color: var(--royal-blue); width: 36px; height: 36px;"></i>
                </div>
                <h1 class="text-3xl md:text-4xl font-bold mb-4" style="color: var(--royal-blue);">
                    Individuelle Anfrage
                </h1>
                <p class="text-gray-600 text-lg">
                    Füllen Sie das Formular aus und wir melden uns schnellstmöglich bei Ihnen.
                </p>
            </div>

            <!-- Info Box -->
            <div class="alert mb-8" style="background-color: #f0f5ff; border-color: var(--royal-blue);">
                <i data-lucide="info" style="color: var(--royal-blue); width: 32px; height: 32px;"></i>
                <div>
                    <p class="text-sm" style="color: var(--royal-blue);">
                        Wir prüfen Ihre Anfrage und melden uns innerhalb von <strong>2 Werktagen</strong> bei Ihnen, 
                        um eine individuelle Lösung zu finden.
                    </p>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="card bg-base-100 shadow-xl">
                <div class="card-body">
                    <form id="contactForm" class="space-y-10">
                        <!-- Seminar Request Details -->
                        <section>
                            <h3 class="text-xl font-semibold mb-6 flex items-center gap-2" style="color: var(--royal-blue);">
                                <i data-lucide="clipboard-list" style="width: 24px; height: 24px;"></i>
                                Ihre Anfrage
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6 mb-6">
                                <div class="form-field">
                                    <label class="form-label">Seminar/Kursart <span class="text-red-500">*</span></label>
                                    <select 
                                        name="seminar" 
                                        id="seminarSelect"
                                        class="select select-bordered form-select" 
                                        style="border-color: var(--royal-blue);"
                                        required
                                    >
                                        <option value="">Bitte wählen</option>
                                        <option value="mitarbeitermotivation">Mitarbeitermotivation</option>
                                        <option value="arbeitsgestaltung">Arbeitsgestaltung</option>
                                        <option value="mitarbeiterfuehrung">Mitarbeiterführung</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">Teilnehmeranzahl <span class="text-red-500">*</span></label>
                                    <input 
                                        type="number" 
                                        name="participants" 
                                        id="participantsInput"
                                        placeholder="z.B. 10" 
                                        min="1"
                                        max="50"
                                        class="input input-bordered form-input" 
                                        style="border-color: var(--royal-blue);"
                                        required
                                    />
                                </div>
                            </div>
                            <div class="form-field mb-6">
                                <label class="form-label">Gewünschter Zeitraum <span class="text-red-500">*</span></label>
                                <input 
                                    type="text" 
                                    name="timeframe" 
                                    id="timeframeInput"
                                    placeholder="z.B. Anfang März 2026" 
                                    class="input input-bordered form-input" 
                                    style="border-color: var(--royal-blue);"
                                    required
                                />
                            </div>
                            <div class="form-field">
                                <label class="form-label">Zusätzliche Details (Optional)</label>
                                <textarea 
                                    name="details" 
                                    placeholder="Teilen Sie uns weitere Details zu Ihrer Anfrage mit, z.B. besondere Anforderungen, bevorzugte Zeiten, etc." 
                                    class="textarea textarea-bordered form-textarea h-32" 
                                    style="border-color: var(--royal-blue);"
                                ></textarea>
                            </div>
                        </section>
                        <!-- Company Information -->
                        <section>
                            <h3 class="text-xl font-semibold mb-6 flex items-center gap-2" style="color: var(--royal-blue);">
                                <i data-lucide="building-2" style="width: 24px; height: 24px;"></i>
                                Unternehmensdaten
                            </h3>
                            <div class="form-field">
                                <label class="form-label">Firma <span class="text-red-500">*</span></label>
                                <input 
                                    type="text" 
                                    name="company" 
                                    placeholder="Firmenname" 
                                    class="input input-bordered form-input" 
                                    style="border-color: var(--royal-blue);"
                                    required
                                />
                            </div>
                        </section>
                        <!-- Personal Information -->
                        <section>
                            <h3 class="text-xl font-semibold mb-6 flex items-center gap-2" style="color: var(--royal-blue);">
                                <i data-lucide="user" style="width: 24px; height: 24px;"></i>
                                Kontaktperson
                            </h3>
                            <div class="grid md:grid-cols-2 gap-6 mb-6">
                                <div class="form-field">
                                    <label class="form-label">Anrede <span class="text-red-500">*</span></label>
                                    <select 
                                        name="salutation" 
                                        class="select select-bordered form-select" 
                                        style="border-color: var(--royal-blue);"
                                        required
                                    >
                                        <option value="">Bitte wählen</option>
                                        <option value="Herr">Herr</option>
                                        <option value="Frau">Frau</option>
                                        <option value="Divers">Divers</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">Titel</label>
                                    <input 
                                        type="text" 
                                        name="title" 
                                        placeholder="z.B. Dr., Prof." 
                                        class="input input-bordered form-input" 
                                        style="border-color: var(--royal-blue);"
                                    />
                                </div>
                            </div>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-field">
                                    <label class="form-label">Vorname <span class="text-red-500">*</span></label>
                                    <input 
                                        type="text" 
                                        name="firstName" 
                                        placeholder="Vorname" 
                                        class="input input-bordered form-input" 
                                        style="border-color: var(--royal-blue);"
                                        pattern="[A-Za-zÄÖÜäöüß\s\-]+"
                                        title="Bitte nur Buchstaben eingeben"
                                        required
                                    />
                                </div>
                                <div class="form-field">
                                    <label class="form-label">Nachname <span class="text-red-500">*</span></label>
                                    <input 
                                        type="text" 
                                        name="lastName" 
                                        placeholder="Nachname" 
                                        class="input input-bordered form-input" 
                                        style="border-color: var(--royal-blue);"
                                        pattern="[A-Za-zÄÖÜäöüß\s\-]+"
                                        title="Bitte nur Buchstaben eingeben"
                                        required
                                    />
                                </div>
                            </div>
                        </section>
                        <!-- Contact Information -->
                        <section>
                            <h3 class="text-xl font-semibold mb-6 flex items-center gap-2" style="color: var(--royal-blue);">
                                <i data-lucide="phone" style="width: 24px; height: 24px;"></i>
                                Kontaktinformationen
                            </h3>
                            <div class="form-field mb-6">
                                <label class="form-label">E-Mail <span class="text-red-500">*</span></label>
                                <input 
                                    type="email" 
                                    name="email" 
                                    id="email"
                                    placeholder="ihre.email@firma.de" 
                                    class="input input-bordered form-input" 
                                    style="border-color: var(--royal-blue);"
                                    required
                                />
                            </div>
                            <div class="form-field mb-6">
                                <label class="form-label">E-Mail-Adresse bestätigen <span class="text-red-500">*</span></label>
                                <input 
                                    type="email" 
                                    name="emailConfirm" 
                                    id="emailConfirm"
                                    placeholder="ihre.email@firma.de" 
                                    class="input input-bordered form-input" 
                                    style="border-color: var(--royal-blue);"
                                    required
                                />
                            </div>
                            <div class="form-field mb-6">
                                <label class="form-label">Telefon <span class="text-red-500">*</span></label>
                                <div class="phone-input-wrapper">
                                    <div class="input input-bordered country-code-selector" id="countrySelector" style="border-color: var(--royal-blue);">
                                        <span class="fi fi-de"></span>
                                        <span id="selectedCode">+49</span>
                                        <i data-lucide="chevron-down" style="width: 16px; height: 16px;"></i>
                                        <div class="country-dropdown" id="countryDropdown">
                                            <div class="country-option" data-code="+49" data-flag="de">
                                                <span class="fi fi-de"></span>
                                                <span>Deutschland</span>
                                                <span class="ml-auto text-gray-500">+49</span>
                                            </div>
                                            <div class="country-option" data-code="+43" data-flag="at">
                                                <span class="fi fi-at"></span>
                                                <span>Österreich</span>
                                                <span class="ml-auto text-gray-500">+43</span>
                                            </div>
                                            <div class="country-option" data-code="+41" data-flag="ch">
                                                <span class="fi fi-ch"></span>
                                                <span>Schweiz</span>
                                                <span class="ml-auto text-gray-500">+41</span>
                                            </div>
                                            <div class="country-option" data-code="+44" data-flag="gb">
                                                <span class="fi fi-gb"></span>
                                                <span>Vereinigtes Königreich</span>
                                                <span class="ml-auto text-gray-500">+44</span>
                                            </div>
                                            <div class="country-option" data-code="+33" data-flag="fr">
                                                <span class="fi fi-fr"></span>
                                                <span>Frankreich</span>
                                                <span class="ml-auto text-gray-500">+33</span>
                                            </div>
                                            <div class="country-option" data-code="+39" data-flag="it">
                                                <span class="fi fi-it"></span>
                                                <span>Italien</span>
                                                <span class="ml-auto text-gray-500">+39</span>
                                            </div>
                                            <div class="country-option" data-code="+34" data-flag="es">
                                                <span class="fi fi-es"></span>
                                                <span>Spanien</span>
                                                <span class="ml-auto text-gray-500">+34</span>
                                            </div>
                                            <div class="country-option" data-code="+31" data-flag="nl">
                                                <span class="fi fi-nl"></span>
                                                <span>Niederlande</span>
                                                <span class="ml-auto text-gray-500">+31</span>
                                            </div>
                                            <div class="country-option" data-code="+32" data-flag="be">
                                                <span class="fi fi-be"></span>
                                                <span>Belgien</span>
                                                <span class="ml-auto text-gray-500">+32</span>
                                            </div>
                                            <div class="country-option" data-code="+48" data-flag="pl">
                                                <span class="fi fi-pl"></span>
                                                <span>Polen</span>
                                                <span class="ml-auto text-gray-500">+48</span>
                                            </div>
                                            <div class="country-option" data-code="+1" data-flag="us">
                                                <span class="fi fi-us"></span>
                                                <span>Vereinigte Staaten</span>
                                                <span class="ml-auto text-gray-500">+1</span>
                                            </div>
                                        </div>
                                    </div>
                                    <input 
                                        type="tel" 
                                        name="phone" 
                                        id="phoneNumber"
                                        placeholder="123 456789" 
                                        class="input input-bordered phone-number-input" 
                                        style="border-color: var(--royal-blue);"
                                        pattern="[0-9\s\-]+"
                                        title="Bitte nur Ziffern, Leerzeichen oder - eingeben"
                                        required
                                    />
                                </div>
                                <input type="hidden" name="countryCode" id="countryCodeHidden" value="+49" />
                            </div>
                        </section>

                        <!-- Privacy Checkbox -->
                        <div class="form-control">
                            <label class="label cursor-pointer justify-start gap-3">
                                <input 
                                    type="checkbox" 
                                    name="privacy" 
                                    class="checkbox" 
                                    style="border-color: var(--royal-blue);"
                                    required
                                />
                                <span class="label-text">
                                    Ich habe die <a href="#" class="link" style="color: var(--royal-blue);">Datenschutzerklärung</a> gelesen und akzeptiere diese. <span class="text-red-500">*</span>
                                </span>
                            </label>
                        </div>

                        <!-- Submit Button -->
                        <div class="flex flex-col sm:flex-row gap-4 justify-end">
                            <a href="landingpage.html" class="btn btn-outline" style="border-color: var(--royal-blue); color: var(--royal-blue);">
                                <i data-lucide="x" style="width: 20px; height: 20px;"></i>
                                Abbrechen
                            </a>
                            <button type="submit" class="btn" style="background-color: var(--royal-blue); color: white;">
                                <i data-lucide="send" style="width: 20px; height: 20px;"></i>
                                Anfrage absenden
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <!-- Success Modal -->
    <dialog id="successModal" class="modal">
        <div class="modal-box max-w-md" style="border: 2px solid var(--royal-blue);">
            <div class="flex flex-col items-center text-center py-6">
                <div class="w-20 h-20 rounded-full flex items-center justify-center mb-4" 
                     style="background-color: white;">
                    <i data-lucide="check-circle" style="color: #43a842; width: 60px; height: 60px;"></i>
                </div>
                <h3 class="font-bold text-2xl mb-4" style="color: var(--royal-blue);">Anfrage gesendet!</h3>
                <p class="text-gray-600 mb-6">
                    Vielen Dank für Ihre Anfrage. Wir haben Ihre Nachricht erhalten und 
                    werden uns innerhalb von <strong>2 Werktagen</strong> bei Ihnen melden.
                </p>
                <div class="modal-action justify-center">
                    <a href="landingpage.html" class="btn" style="background-color: var(--royal-blue); color: white;">
                        Zur Startseite
                    </a>
                </div>
            </div>
        </div>
    </dialog>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Check if we came from booking process with pre-filled data
        const urlParams = new URLSearchParams(window.location.search);
        const prefilledSeminar = urlParams.get('seminar');
        const prefilledParticipants = urlParams.get('participants');
        const prefilledDate = urlParams.get('date');

        // Pre-fill form if data is available
        if (prefilledSeminar) {
            document.getElementById('seminarSelect').value = prefilledSeminar;
        }
        if (prefilledParticipants) {
            document.getElementById('participantsInput').value = prefilledParticipants;
        }
        if (prefilledDate) {
            // Date is already formatted from booking-date.html
            document.getElementById('timeframeInput').value = prefilledDate;
        }

        // Email confirmation validation
        const emailInput = document.getElementById('email');
        const emailConfirmInput = document.getElementById('emailConfirm');
        
        function validateEmailConfirm() {
            if (emailConfirmInput.value === '') {
                emailConfirmInput.setCustomValidity('');
            } else if (emailInput.value !== emailConfirmInput.value) {
                emailConfirmInput.setCustomValidity('Die E-Mail-Adressen stimmen nicht überein.');
            } else {
                emailConfirmInput.setCustomValidity('');
            }
        }
        
        emailInput.addEventListener('input', validateEmailConfirm);
        emailConfirmInput.addEventListener('input', validateEmailConfirm);

        // Helper function to show browser-native feedback
        function showInvalidFeedback(input, message) {
            input.setCustomValidity(message);
            input.reportValidity();
            setTimeout(() => input.setCustomValidity(''), 100);
        }

        // Get form inputs for validation
        const firstNameInput = document.querySelector('input[name="firstName"]');
        const lastNameInput = document.querySelector('input[name="lastName"]');
        const participantsInput = document.getElementById('participantsInput');

        // First name - only letters, spaces, hyphens, umlauts
        if (firstNameInput) {
            firstNameInput.addEventListener('keypress', function(e) {
                const char = e.key;
                if (!/^[A-Za-zÄÖÜäöüß\s\-]$/.test(char) && !['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab'].includes(char)) {
                    e.preventDefault();
                    showInvalidFeedback(this, 'Nur Buchstaben, Leerzeichen und Bindestriche erlaubt');
                }
            });
            firstNameInput.addEventListener('input', function(e) {
                const filtered = e.target.value.replace(/[^A-Za-zÄÖÜäöüß\s\-]/g, '');
                if (filtered !== e.target.value) {
                    e.target.value = filtered;
                }
            });
        }

        // Last name - only letters, spaces, hyphens, umlauts
        if (lastNameInput) {
            lastNameInput.addEventListener('keypress', function(e) {
                const char = e.key;
                if (!/^[A-Za-zÄÖÜäöüß\s\-]$/.test(char) && !['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab'].includes(char)) {
                    e.preventDefault();
                    showInvalidFeedback(this, 'Nur Buchstaben, Leerzeichen und Bindestriche erlaubt');
                }
            });
            lastNameInput.addEventListener('input', function(e) {
                const filtered = e.target.value.replace(/[^A-Za-zÄÖÜäöüß\s\-]/g, '');
                if (filtered !== e.target.value) {
                    e.target.value = filtered;
                }
            });
        }

        // Phone - only digits, spaces, hyphens
        const phoneNumberInput = document.getElementById('phoneNumber');
        if (phoneNumberInput) {
            phoneNumberInput.addEventListener('keypress', function(e) {
                const char = e.key;
                if (!/^[0-9\s\-]$/.test(char) && !['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab'].includes(char)) {
                    e.preventDefault();
                    showInvalidFeedback(this, 'Nur Ziffern, Leerzeichen und Bindestriche erlaubt');
                }
            });
            phoneNumberInput.addEventListener('input', function(e) {
                const filtered = e.target.value.replace(/[^0-9\s\-]/g, '');
                if (filtered !== e.target.value) {
                    e.target.value = filtered;
                }
            });
        }

        // Country code selector functionality
        const countrySelector = document.getElementById('countrySelector');
        const countryDropdown = document.getElementById('countryDropdown');
        const selectedCodeSpan = document.getElementById('selectedCode');
        const countryCodeHidden = document.getElementById('countryCodeHidden');
        const countryOptions = document.querySelectorAll('.country-option');

        countrySelector.addEventListener('click', (e) => {
            e.stopPropagation();
            countryDropdown.classList.toggle('show');
        });

        countryOptions.forEach(option => {
            option.addEventListener('click', (e) => {
                e.stopPropagation();
                const code = option.dataset.code;
                const flag = option.dataset.flag;
                
                // Update selected display
                selectedCodeSpan.textContent = code;
                countryCodeHidden.value = code;
                
                // Update flag
                const flagSpan = countrySelector.querySelector('.fi');
                flagSpan.className = `fi fi-${flag}`;
                
                // Close dropdown
                countryDropdown.classList.remove('show');
                
                // Re-initialize icons
                lucide.createIcons();
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            countryDropdown.classList.remove('show');
        });

        // Participants - only digits
        if (participantsInput) {
            participantsInput.addEventListener('keypress', function(e) {
                const char = e.key;
                if (!/^[0-9]$/.test(char) && !['Backspace', 'Delete', 'ArrowLeft', 'ArrowRight', 'Tab'].includes(char)) {
                    e.preventDefault();
                    showInvalidFeedback(this, 'Nur Ziffern erlaubt');
                }
            });
            participantsInput.addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/[^0-9]/g, '');
            });
        }

        // Form submission
        document.getElementById('contactForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Validate email confirmation
            validateEmailConfirm();
            
            // Remove previous error styling
            const form = e.target;
            const allInputs = form.querySelectorAll('.input, .select, .textarea');
            allInputs.forEach(input => input.classList.remove('input-error'));
            
            // Check if form is valid
            if (!form.checkValidity()) {
                // Add red border to invalid fields
                allInputs.forEach(input => {
                    if (!input.checkValidity()) {
                        input.classList.add('input-error');
                    }
                });
                form.reportValidity();
                return;
            }
            
            const formData = new FormData(e.target);
            
            // In a real application, this would send the data to a server
            console.log('Contact form submitted with data:', Object.fromEntries(formData));
            
            // Show success modal
            document.getElementById('successModal').showModal();
            
            // Re-initialize icons after modal is shown
            setTimeout(() => {
                lucide.createIcons();
            }, 100);
        });
    </script>

</body>
</html>